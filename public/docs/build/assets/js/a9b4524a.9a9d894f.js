"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[843],{5617(n,r,e){e.r(r),e.d(r,{assets:()=>o,contentTitle:()=>d,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"database/schema","title":"Database Schema","description":"HospitiumRIS uses PostgreSQL with Prisma ORM for data management. This document provides a comprehensive overview of the data models and their relationships.","source":"@site/docs/database/schema.md","sourceDirName":"database","slug":"/database/schema","permalink":"/docs/build/docs/database/schema","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Database Schema"},"sidebar":"docsSidebar","previous":{"title":"Installation Guide","permalink":"/docs/build/docs/getting-started/installation"},"next":{"title":"Researcher Portal","permalink":"/docs/build/docs/modules/researcher"}}');var t=e(4848),a=e(8453);const s={sidebar_position:1,title:"Database Schema"},d="Database Schema",o={},l=[{value:"Schema Overview",id:"schema-overview",level:2},{value:"Core Models",id:"core-models",level:2},{value:"User",id:"user",level:3},{value:"Research Profile",id:"research-profile",level:3},{value:"Institution",id:"institution",level:3},{value:"Foundation",id:"foundation",level:3},{value:"Publication Management",id:"publication-management",level:2},{value:"Publication",id:"publication",level:3},{value:"Library Folder",id:"library-folder",level:3},{value:"Manuscript Collaboration",id:"manuscript-collaboration",level:2},{value:"Manuscript",id:"manuscript",level:3},{value:"Manuscript Collaborator",id:"manuscript-collaborator",level:3},{value:"Manuscript Version",id:"manuscript-version",level:3},{value:"Tracked Change",id:"tracked-change",level:3},{value:"Manuscript Comment",id:"manuscript-comment",level:3},{value:"Proposal Management",id:"proposal-management",level:2},{value:"Proposal",id:"proposal",level:3},{value:"Foundation &amp; Grants",id:"foundation--grants",level:2},{value:"Campaign",id:"campaign",level:3},{value:"Donation",id:"donation",level:3},{value:"Grantor",id:"grantor",level:3},{value:"Grant Opportunity",id:"grant-opportunity",level:3},{value:"Entity Relationship Diagram",id:"entity-relationship-diagram",level:2},{value:"Database Commands",id:"database-commands",level:2},{value:"Common Prisma Commands",id:"common-prisma-commands",level:3},{value:"Direct Database Access",id:"direct-database-access",level:3},{value:"Indexing &amp; Performance",id:"indexing--performance",level:2}];function c(n){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"database-schema",children:"Database Schema"})}),"\n",(0,t.jsx)(r.p,{children:"HospitiumRIS uses PostgreSQL with Prisma ORM for data management. This document provides a comprehensive overview of the data models and their relationships."}),"\n",(0,t.jsx)(r.h2,{id:"schema-overview",children:"Schema Overview"}),"\n",(0,t.jsx)(r.p,{children:"The database is organized into several logical domains:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502                           HospitiumRIS Database                          \u2502\r\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\r\n\u2502  User & Auth    \u2502   Research      \u2502   Foundation    \u2502   Collaboration  \u2502\r\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\r\n\u2502 \u2022 User          \u2502 \u2022 Publication   \u2502 \u2022 Campaign      \u2502 \u2022 Manuscript     \u2502\r\n\u2502 \u2022 Institution   \u2502 \u2022 Proposal      \u2502 \u2022 Donation      \u2502 \u2022 Collaborator   \u2502\r\n\u2502 \u2022 Foundation    \u2502 \u2022 ResearchProfile\u2502 \u2022 Grantor      \u2502 \u2022 Invitation     \u2502\r\n\u2502 \u2022 UserSettings  \u2502 \u2022 LibraryFolder \u2502 \u2022 GrantOpportunity\u2502 \u2022 Comment      \u2502\r\n\u2502 \u2022 RegistrationLog\u2502               \u2502 \u2022 CampaignActivity\u2502 \u2022 Version       \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(r.h2,{id:"core-models",children:"Core Models"}),"\n",(0,t.jsx)(r.h3,{id:"user",children:"User"}),"\n",(0,t.jsx)(r.p,{children:"The central model for all user accounts in the system."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-prisma",children:"model User {\r\n  id              String      @id @default(cuid())\r\n  accountType     AccountType // RESEARCHER, RESEARCH_ADMIN, FOUNDATION_ADMIN, SUPER_ADMIN\r\n  status          UserStatus  @default(PENDING)\r\n  \r\n  // Personal Information\r\n  givenName       String\r\n  familyName      String\r\n  email           String      @unique\r\n  passwordHash    String\r\n  \r\n  // Email Verification\r\n  emailVerified   Boolean     @default(false)\r\n  \r\n  // ORCID Information\r\n  orcidId         String?\r\n  \r\n  // Research Information\r\n  primaryInstitution String?\r\n  \r\n  // Relations\r\n  institution     Institution?\r\n  foundation      Foundation?\r\n  researchProfile ResearchProfile?\r\n  publications    PublicationAuthor[]\r\n  manuscripts     Manuscript[]\r\n  // ... other relations\r\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Account Types:"})}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"RESEARCHER"})}),(0,t.jsx)(r.td,{children:"Individual researchers"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"RESEARCH_ADMIN"})}),(0,t.jsx)(r.td,{children:"Institutional research administrators"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"FOUNDATION_ADMIN"})}),(0,t.jsx)(r.td,{children:"Foundation/funding organization admins"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"SUPER_ADMIN"})}),(0,t.jsx)(r.td,{children:"System-wide administrators"})]})]})]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"User Statuses:"})}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Status"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"PENDING"})}),(0,t.jsx)(r.td,{children:"Awaiting email verification"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ACTIVE"})}),(0,t.jsx)(r.td,{children:"Verified and active"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"INACTIVE"})}),(0,t.jsx)(r.td,{children:"Temporarily disabled"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"SUSPENDED"})}),(0,t.jsx)(r.td,{children:"Administratively suspended"})]})]})]}),"\n",(0,t.jsx)(r.h3,{id:"research-profile",children:"Research Profile"}),"\n",(0,t.jsx)(r.p,{children:"Extended researcher information linked to User."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-prisma",children:"model ResearchProfile {\r\n  id              String   @id @default(cuid())\r\n  userId          String   @unique\r\n  \r\n  // Research Information\r\n  specialization  String[]\r\n  keywords        String[]\r\n  researchInterests String?\r\n  biography       String?\r\n  \r\n  // Academic Information\r\n  academicTitle   String?  // Professor, Dr., etc.\r\n  department      String?\r\n  \r\n  // Professional Links\r\n  website         String?\r\n  linkedin        String?\r\n  twitter         String?\r\n  googleScholar   String?\r\n  \r\n  // Research Metrics\r\n  hIndex          Int?\r\n  citationCount   Int?\r\n  \r\n  user            User     @relation(...)\r\n}\n"})}),"\n",(0,t.jsx)(r.h3,{id:"institution",children:"Institution"}),"\n",(0,t.jsx)(r.p,{children:"Research institution details for RESEARCH_ADMIN accounts."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-prisma",children:"model Institution {\r\n  id          String   @id @default(cuid())\r\n  userId      String   @unique\r\n  \r\n  name        String\r\n  type        String   // University, Hospital, Research Institute\r\n  country     String\r\n  website     String?\r\n  \r\n  user        User     @relation(...)\r\n}\n"})}),"\n",(0,t.jsx)(r.h3,{id:"foundation",children:"Foundation"}),"\n",(0,t.jsx)(r.p,{children:"Foundation details for FOUNDATION_ADMIN accounts."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-prisma",children:"model Foundation {\r\n  id              String   @id @default(cuid())\r\n  userId          String   @unique\r\n  \r\n  institutionName String\r\n  foundationName  String\r\n  type            String   // Private Foundation, Public Foundation\r\n  country         String\r\n  website         String?\r\n  focusArea       String?\r\n  description     String?\r\n  \r\n  user            User     @relation(...)\r\n}\n"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"publication-management",children:"Publication Management"}),"\n",(0,t.jsx)(r.h3,{id:"publication",children:"Publication"}),"\n",(0,t.jsx)(r.p,{children:"Stores research publications imported from external sources or manually entered."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-prisma",children:"model Publication {\r\n  id              String            @id @default(cuid())\r\n  \r\n  title           String\r\n  type            String?           // Article, Review, Conference\r\n  field           String?\r\n  journal         String?\r\n  abstract        String?\r\n  authors         String[]\r\n  \r\n  // Identifiers\r\n  doi             String?\r\n  isbn            String?\r\n  url             String?\r\n  \r\n  // Metadata\r\n  keywords        String[]\r\n  pages           String?\r\n  volume          String?\r\n  publicationDate DateTime?\r\n  year            Int?\r\n  \r\n  status          PublicationStatus @default(PUBLISHED)\r\n  source          String?           // PubMed, CrossRef, OpenAlex, Manual\r\n  \r\n  authorRelations PublicationAuthor[]\r\n  manuscriptCitations ManuscriptCitation[]\r\n  proposals       ProposalPublication[]\r\n  libraryFolders  LibraryFolderPublication[]\r\n}\n"})}),"\n",(0,t.jsx)(r.h3,{id:"library-folder",children:"Library Folder"}),"\n",(0,t.jsx)(r.p,{children:"Hierarchical folder system for organizing publications."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-prisma",children:'model LibraryFolder {\r\n  id          String   @id @default(cuid())\r\n  userId      String\r\n  name        String\r\n  parentId    String?  // For nested folders\r\n  expanded    Boolean  @default(false)\r\n  \r\n  parent      LibraryFolder?  @relation("FolderHierarchy", ...)\r\n  children    LibraryFolder[] @relation("FolderHierarchy")\r\n  publications LibraryFolderPublication[]\r\n}\n'})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"manuscript-collaboration",children:"Manuscript Collaboration"}),"\n",(0,t.jsx)(r.h3,{id:"manuscript",children:"Manuscript"}),"\n",(0,t.jsx)(r.p,{children:"Core model for collaborative document editing."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-prisma",children:"model Manuscript {\r\n  id          String           @id @default(cuid())\r\n  \r\n  title       String\r\n  type        String           // Article, Review, Proposal\r\n  field       String?\r\n  description String?\r\n  status      ManuscriptStatus @default(DRAFT)\r\n  \r\n  // Document Content\r\n  content     String?          @db.Text  // HTML/JSON from TipTap\r\n  wordCount   Int?             @default(0)\r\n  \r\n  createdBy   String\r\n  lastUpdatedBy String?\r\n  \r\n  collaborators ManuscriptCollaborator[]\r\n  invitations   ManuscriptInvitation[]\r\n  citations     ManuscriptCitation[]\r\n  comments      ManuscriptComment[]\r\n  versions      ManuscriptVersion[]\r\n  trackedChanges TrackedChange[]\r\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Manuscript Statuses:"})}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Status"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"DRAFT"})}),(0,t.jsx)(r.td,{children:"Initial editing phase"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"IN_REVIEW"})}),(0,t.jsx)(r.td,{children:"Under peer review"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"UNDER_REVISION"})}),(0,t.jsx)(r.td,{children:"Being revised based on feedback"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"PUBLISHED"})}),(0,t.jsx)(r.td,{children:"Finalized and published"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ARCHIVED"})}),(0,t.jsx)(r.td,{children:"No longer active"})]})]})]}),"\n",(0,t.jsx)(r.h3,{id:"manuscript-collaborator",children:"Manuscript Collaborator"}),"\n",(0,t.jsx)(r.p,{children:"Tracks user access and permissions for manuscripts."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-prisma",children:"model ManuscriptCollaborator {\r\n  id           String          @id @default(cuid())\r\n  manuscriptId String\r\n  userId       String\r\n  \r\n  role         CollaboratorRole  // OWNER, ADMIN, EDITOR, CONTRIBUTOR, REVIEWER\r\n  invitedBy    String\r\n  \r\n  // Permissions\r\n  canEdit      Boolean         @default(true)\r\n  canInvite    Boolean         @default(false)\r\n  canDelete    Boolean         @default(false)\r\n  \r\n  manuscript   Manuscript      @relation(...)\r\n  user         User            @relation(...)\r\n}\n"})}),"\n",(0,t.jsx)(r.h3,{id:"manuscript-version",children:"Manuscript Version"}),"\n",(0,t.jsx)(r.p,{children:"Stores version snapshots for history and rollback."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-prisma",children:"model ManuscriptVersion {\r\n  id            String      @id @default(cuid())\r\n  manuscriptId  String\r\n  versionNumber Int\r\n  \r\n  title         String\r\n  content       String      @db.Text\r\n  changes       String?     @db.Text  // JSON tracked changes data\r\n  \r\n  createdBy     String\r\n  versionType   VersionType @default(AUTO)  // AUTO, MANUAL, MILESTONE\r\n  description   String?\r\n  wordCount     Int?\r\n  \r\n  manuscript    Manuscript  @relation(...)\r\n  creator       User        @relation(...)\r\n}\n"})}),"\n",(0,t.jsx)(r.h3,{id:"tracked-change",children:"Tracked Change"}),"\n",(0,t.jsx)(r.p,{children:"Individual change tracking for accept/reject workflow."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-prisma",children:"model TrackedChange {\r\n  id           String       @id @default(cuid())\r\n  manuscriptId String\r\n  changeId     String\r\n  \r\n  type         ChangeType   // INSERT, DELETE, FORMAT, REPLACE\r\n  operation    String\r\n  content      String?      @db.Text\r\n  oldContent   String?      @db.Text\r\n  \r\n  startOffset  Int\r\n  endOffset    Int\r\n  nodeType     String?\r\n  \r\n  authorId     String\r\n  status       ChangeStatus @default(PENDING)  // PENDING, ACCEPTED, REJECTED\r\n  \r\n  acceptedAt   DateTime?\r\n  rejectedAt   DateTime?\r\n  acceptedBy   String?\r\n  \r\n  manuscript   Manuscript   @relation(...)\r\n  author       User         @relation(...)\r\n}\n"})}),"\n",(0,t.jsx)(r.h3,{id:"manuscript-comment",children:"Manuscript Comment"}),"\n",(0,t.jsx)(r.p,{children:"Inline comments and threaded discussions."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-prisma",children:"model ManuscriptComment {\r\n  id              String        @id @default(cuid())\r\n  manuscriptId    String\r\n  authorId        String\r\n  parentCommentId String?\r\n  \r\n  content         String        @db.Text\r\n  type            CommentType   @default(COMMENT)  // COMMENT, SUGGESTION, QUESTION\r\n  status          CommentStatus @default(ACTIVE)   // ACTIVE, RESOLVED, DELETED\r\n  \r\n  // Text Selection Context\r\n  selectedText    String?\r\n  startOffset     Int?\r\n  endOffset       Int?\r\n  \r\n  manuscript      Manuscript         @relation(...)\r\n  author          User               @relation(...)\r\n  parentComment   ManuscriptComment? @relation(...)\r\n  replies         ManuscriptComment[]\r\n}\n"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"proposal-management",children:"Proposal Management"}),"\n",(0,t.jsx)(r.h3,{id:"proposal",children:"Proposal"}),"\n",(0,t.jsx)(r.p,{children:"Research proposal with full lifecycle tracking."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-prisma",children:"model Proposal {\r\n  id          String         @id @default(cuid())\r\n  \r\n  // Core Information\r\n  title       String\r\n  principalInvestigator String\r\n  principalInvestigatorOrcid String?\r\n  coInvestigators Json[]\r\n  departments String[]\r\n  startDate   DateTime?\r\n  endDate     DateTime?\r\n  \r\n  // Research Details\r\n  researchAreas String[]\r\n  researchObjectives String?\r\n  methodology String?\r\n  abstract    String?\r\n  \r\n  // Project Management\r\n  milestones  Json[]\r\n  deliverables Json[]\r\n  \r\n  // Funding\r\n  fundingSource String?\r\n  grantNumber String?\r\n  fundingInstitution String?\r\n  totalBudgetAmount Decimal?\r\n  \r\n  // Ethical Considerations\r\n  ethicalConsiderationsOverview String?\r\n  consentProcedures String?\r\n  dataSecurityMeasures String?\r\n  ethicsApprovalStatus String?\r\n  \r\n  // File uploads (metadata)\r\n  ethicsDocuments Json[]\r\n  dataManagementPlan Json[]\r\n  otherRelatedFiles Json[]\r\n  \r\n  status      ProposalStatus @default(DRAFT)\r\n  \r\n  publications ProposalPublication[]\r\n  manuscripts  ProposalManuscript[]\r\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Proposal Statuses:"})}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Status"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"DRAFT"})}),(0,t.jsx)(r.td,{children:"Being prepared"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"SUBMITTED"})}),(0,t.jsx)(r.td,{children:"Submitted for review"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"UNDER_REVIEW"})}),(0,t.jsx)(r.td,{children:"Being evaluated"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"APPROVED"})}),(0,t.jsx)(r.td,{children:"Accepted"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"REJECTED"})}),(0,t.jsx)(r.td,{children:"Not approved"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"REVISION_REQUESTED"})}),(0,t.jsx)(r.td,{children:"Needs changes"})]})]})]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"foundation--grants",children:"Foundation & Grants"}),"\n",(0,t.jsx)(r.h3,{id:"campaign",children:"Campaign"}),"\n",(0,t.jsx)(r.p,{children:"Fundraising campaign management."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-prisma",children:'model Campaign {\r\n  id          String   @id @default(cuid())\r\n  categoryId  String\r\n  \r\n  name        String\r\n  description String?\r\n  targetAmount Decimal?\r\n  raisedAmount Decimal  @default(0)\r\n  \r\n  startDate   DateTime?\r\n  endDate     DateTime?\r\n  status      String   @default("Planning")\r\n  \r\n  donorCount      Int @default(0)\r\n  donationCount   Int @default(0)\r\n  \r\n  category    CampaignCategory @relation(...)\r\n  activities  CampaignActivity[]\r\n  donations   Donation[]\r\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"donation",children:"Donation"}),"\n",(0,t.jsx)(r.p,{children:"Individual donation records."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-prisma",children:'model Donation {\r\n  id              String   @id @default(cuid())\r\n  campaignId      String?\r\n  \r\n  donorName       String\r\n  donorEmail      String?\r\n  donorPhone      String?\r\n  donorType       String?\r\n  \r\n  amount          Decimal\r\n  donationDate    DateTime @default(now())\r\n  paymentMethod   String?\r\n  transactionId   String?\r\n  \r\n  status          String   @default("Completed")\r\n  message         String?\r\n  isAnonymous     Boolean  @default(false)\r\n  taxDeductible   Boolean  @default(true)\r\n  \r\n  campaign        Campaign? @relation(...)\r\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"grantor",children:"Grantor"}),"\n",(0,t.jsx)(r.p,{children:"Grant funding organizations."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-prisma",children:'model Grantor {\r\n  id              String   @id @default(cuid())\r\n  \r\n  name            String   @unique\r\n  type            String   // federal, private, nonprofit, corporate\r\n  focus           String[]\r\n  \r\n  contactPerson   String?\r\n  email           String?\r\n  phone           String?\r\n  country         String\r\n  \r\n  status          String   @default("active")\r\n  \r\n  opportunities   GrantOpportunity[]\r\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"grant-opportunity",children:"Grant Opportunity"}),"\n",(0,t.jsx)(r.p,{children:"Available grant opportunities from grantors."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-prisma",children:'model GrantOpportunity {\r\n  id              String   @id @default(cuid())\r\n  grantorId       String\r\n  \r\n  title           String\r\n  amount          Decimal\r\n  deadline        DateTime\r\n  \r\n  category        String[]\r\n  eligibility     String[]\r\n  notes           String?\r\n  status          String   @default("open")\r\n  \r\n  grantor         Grantor  @relation(...)\r\n}\n'})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"entity-relationship-diagram",children:"Entity Relationship Diagram"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502     User     \u2502\u2500\u2500\u2500\u2500<\u2502 ResearchProfile\u2502     \u2502   Institution    \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n       \u2502                                            \u2502\r\n       \u2502 1:N                                        \u2502 1:1\r\n       \u2502                                            \u2502\r\n       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n       \u2502\r\n       \u2502     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n       \u251c\u2500\u2500\u2500\u2500<\u2502 PublicationAuthor\u2502>\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n       \u2502     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502                  \u2502\r\n       \u2502                              \u2502                  \u2502\r\n       \u2502     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2510\r\n       \u251c\u2500\u2500\u2500\u2500<\u2502ManuscriptCollaborator\u2502>\u2500\u253c\u2500\u2500\u2500<\u2502   Manuscript    \u2502\r\n       \u2502     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n       \u2502                              \u2502             \u2502\r\n       \u2502                              \u2502    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n       \u2502                              \u2514\u2500\u2500\u2500\u2500\u2502   Publication   \u2502\r\n       \u2502                                   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n       \u2502\r\n       \u2502     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n       \u2514\u2500\u2500\u2500\u2500<\u2502  Notification \u2502\u2500\u2500\u2500\u2500<\u2502   Proposal   \u2502\r\n             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"database-commands",children:"Database Commands"}),"\n",(0,t.jsx)(r.h3,{id:"common-prisma-commands",children:"Common Prisma Commands"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"# Generate client after schema changes\r\nnpm run db:generate\r\n\r\n# Create a migration\r\nnpm run db:migrate\r\n\r\n# Push changes without migration (development)\r\nnpm run db:push\r\n\r\n# Reset database (\u26a0\ufe0f destroys all data)\r\nnpm run db:reset\r\n\r\n# Seed sample data\r\nnpm run db:seed\r\n\r\n# Open Prisma Studio (GUI)\r\nnpm run db:studio\n"})}),"\n",(0,t.jsx)(r.h3,{id:"direct-database-access",children:"Direct Database Access"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"# Connect via psql\r\npsql -U hospitiumuser -d hospitiumris\r\n\r\n# Common queries\r\nSELECT * FROM users WHERE \"accountType\" = 'RESEARCHER';\r\nSELECT COUNT(*) FROM manuscripts WHERE status = 'PUBLISHED';\n"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"indexing--performance",children:"Indexing & Performance"}),"\n",(0,t.jsx)(r.p,{children:"The schema includes automatic indexes on:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Primary keys (",(0,t.jsx)(r.code,{children:"@id"}),")"]}),"\n",(0,t.jsxs)(r.li,{children:["Unique constraints (",(0,t.jsx)(r.code,{children:"@unique"}),")"]}),"\n",(0,t.jsx)(r.li,{children:"Foreign key relationships"}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"For large deployments, consider adding indexes on frequently queried fields:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-prisma",children:"@@index([status])\r\n@@index([createdAt])\r\n@@index([userId, status])\n"})})]})}function u(n={}){const{wrapper:r}={...(0,a.R)(),...n.components};return r?(0,t.jsx)(r,{...n,children:(0,t.jsx)(c,{...n})}):c(n)}},8453(n,r,e){e.d(r,{R:()=>s,x:()=>d});var i=e(6540);const t={},a=i.createContext(t);function s(n){const r=i.useContext(a);return i.useMemo(function(){return"function"==typeof n?n(r):{...r,...n}},[r,n])}function d(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:s(n.components),i.createElement(a.Provider,{value:r},n.children)}}}]);